<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Filter Kombinasi 3D dengan Shio</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex">

  <!-- Sidebar -->
  <nav class="w-64 h-screen bg-gray-800 text-white p-4 flex-shrink-0">
    <div class="text-xl font-bold mb-6">MyApp</div>
    <ul class="space-y-2">
      <li><a href="#" class="block px-2 py-1 hover:bg-gray-700 rounded">Beranda</a></li>

      <!-- Dropdown -->
      <li class="group relative">
        <button class="w-full flex justify-between items-center px-2 py-1 hover:bg-gray-700 rounded focus:outline-none">
          Angka Main
          <svg class="w-4 h-4 ml-2 transform group-hover:rotate-90 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <ul class="ml-4 mt-2 hidden group-hover:block space-y-1">
          <li><a href="#" class="block px-2 py-1 hover:bg-gray-700 rounded">Prediksi 2D</a></li>
          <li class="group relative">
            <button class="w-full text-left flex justify-between items-center px-2 py-1 hover:bg-gray-700 rounded">
              Angka Main 2D
              <svg class="w-4 h-4 ml-2 transform group-hover:rotate-90 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M9 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <!-- Sub-dropdown -->
            <ul class="ml-4 mt-2 hidden group-hover:block space-y-1">
              <li><a href="#" class="block px-2 py-1 hover:bg-gray-700 rounded">2D AS</a></li>
              <li><a href="#" class="block px-2 py-1 hover:bg-gray-700 rounded">2D SHIO</a></li>
            </ul>
          </li>
          <li><a href="3d.html" class="block px-2 py-1 hover:bg-gray-700 rounded">Prediksi 3D</a></li>
        </ul>
      </li>

      <li><a href="#" class="block px-2 py-1 hover:bg-gray-700 rounded">4D</a></li>
    </ul>
  </nav>

  <!-- Konten utama -->
  <main class="flex-1 p-4 overflow-auto">
    <div class="max-w-3xl bg-white rounded-lg shadow p-6 mx-auto">
      <h2 class="text-2xl font-semibold mb-6 text-center">Filter Kombinasi 3D dengan Shio</h2>

      <label for="dataKombinasi" class="block font-medium mb-1">Data Kombinasi (3 digit, pisah spasi/koma):</label>
      <textarea id="dataKombinasi" placeholder="Misal: 123 456 789,012" class="w-full rounded border border-gray-300 p-2 mb-6 resize-none h-24"></textarea>

      <label for="angkaMain" class="block font-medium mb-1">Angka Main (per baris, digit terakhir digunakan):</label>
      <textarea id="angkaMain" placeholder="Misal:\n3\n5\n7" class="w-full rounded border border-gray-300 p-2 mb-6 resize-none h-24"></textarea>

      <label for="shioMain" class="block font-medium mb-1">Pilih Shio:</label>
      <select id="shioMain" class="w-full rounded border border-gray-300 p-2 mb-6">
        <option value="all">Semua Shio</option>
        <option value="Ular">Ular</option>
        <option value="Naga">Naga</option>
        <option value="Kelinci">Kelinci</option>
        <option value="Harimau">Harimau</option>
        <option value="Kerbau">Kerbau</option>
        <option value="Tikus">Tikus</option>
        <option value="Babi">Babi</option>
        <option value="Anjing">Anjing</option>
        <option value="Ayam">Ayam</option>
        <option value="Monyet">Monyet</option>
        <option value="Kambing">Kambing</option>
        <option value="Kuda">Kuda</option>
      </select>

      <button onclick="filterAngka()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded mb-6 transition">Filter Kombinasi</button>

      <div id="result" class="whitespace-pre-wrap bg-gray-100 p-4 rounded min-h-[100px] text-gray-800"></div>
    </div>
  </main>

  <script>
    const shioMap = {
      "Ular": ["00","02","04","05","06","07","08","09","11","14","16","17","18","19","20","21","23","26","28","29","30","31","32","33","35","38","40","41","42","43","44","45","47","50","52","53","54","55","56","57","59","62","64","65","66","67","68","69","71","74","76","77","78","79","80","81","83","86","88","89","90","91","92","93","95","98"],
      "Naga": ["03","05","06","07","08","09","10","12","15","17","18","19","20","21","22","24","27","29","30","31","32","33","34","36","39","41","42","43","44","45","46","48","51","53","54","55","56","57","58","60","63","65","66","67","68","69","70","72","75","77","78","79","80","81","82","84","87","89","90","91","92","93","94","96","99"],
      "Kelinci": ["00","01","04","06","07","08","09","10","11","13","16","18","19","20","21","22","23","25","28","30","31","32","33","34","35","37","40","42","43","44","45","46","47","49","52","54","55","56","57","58","59","61","64","66","67","68","69","70","71","73","76","78","79","80","81","82","83","85","88","90","91","92","93","94","95","97"],
      "Harimau": ["01","02","07","08","09","10","11","12","13","14","19","20","21","22","23","24","25","26","31","32","33","34","35","36","37","38","43","44","45","46","47","48","49","50","55","56","57","58","59","60","61","62","67","68","69","70","71","72","73","74","79","80","81","82","83","84","85","86","91","92","93","94","95","96","97","98"],
      "Kerbau": ["01","06","07","08","09","10","11","12","13","18","19","20","21","22","23","24","25","30","31","32","33","34","35","36","37","42","43","44","45","46","47","48","49","54","55","56","57","58","59","60","61","66","67","68","69","70","71","72","73","78","79","80","81","82","83","84","85","90","91","92","93","94","95","96","97"],
      "Tikus": ["00","01","02","04","05","07","10","11","12","13","14","16","17","19","22","23","24","25","26","28","29","31","34","35","36","37","38","40","41","43","46","47","48","49","50","52","53","55","58","59","60","61","62","64","65","67","70","71","72","73","74","76","77","79","82","83","84","85","86","88","89","91","94","95","96","97","98"],
      "Babi": ["00","01","02","04","05","09","10","11","12","13","14","16","17","21","22","23","24","25","26","28","29","33","34","35","36","37","38","40","41","45","46","47","48","49","50","52","53","57","58","59","60","61","62","64","65","69","70","71","72","73","74","76","77","81","82","83","84","85","86","88","89","93","94","95","96","97","98"],
      "Anjing": ["00","01","02","03","04","06","09","11","12","13","14","15","16","18","21","23","24","25","26","27","28","30","33","35","36","37","38","39","40","42","45","47","48","49","50","51","52","54","57","59","60","61","62","63","64","66","69","71","72","73","74","75","76","78","81","83","84","85","86","87","88","90","93","95","96","97","98","99"],
      "Ayam": ["00","01","02","03","04","07","08","10","11","13","14","15","16","19","20","22","23","25","26","27","28","31","32","34","35","37","38","39","40","43","44","46","47","49","50","51","52","55","56","58","59","61","62","63","64","67","68","70","71","73","74","75","76","79","80","82","83","85","86","87","88","91","92","94","95","97","98","99"],
      "Monyet": ["00","01","02","03","04","05","06","08","11","13","14","15","16","17","18","20","23","25","26","27","28","29","30","32","35","37","38","39","40","41","42","44","47","49","50","51","52","53","54","56","59","61","62","63","64","65","66","68","71","73","74","75","76","77","78","80","83","85","86","87","88","89","90","92","95","97","98","99"],
      "Kambing": ["00","02","03","04","05","06","07","09","12","14","15","16","17","18","19","21","24","26","27","28","29","30","31","33","36","38","39","40","41","42","43","45","48","50","51","52","53","54","55","57","60","62","63","64","65","66","67","69","72","74","75","76","77","78","79","81","84","86","87","88","89","90","91","93","96","98","99"],
      "Kuda": ["00","03","04","05","06","07","08","09","10","15","16","17","18","19","20","21","22","27","28","29","30","31","32","33","34","39","40","41","42","43","44","45","46","51","52","53","54","55","56","57","58","63","64","65","66","67","68","69","70","75","76","77","78","79","80","81","82","87","88","89","90","91","92","93","94","99"]
    };

    function filterAngka() {
      const rawData = document.getElementById("dataKombinasi").value.trim();
      const angkaMainRaw = document.getElementById("angkaMain").value.trim();
      const shioMain = document.getElementById("shioMain").value;
      const resultDiv = document.getElementById("result");

      if (!rawData) {
        alert("Masukkan data kombinasi terlebih dahulu.");
        return;
      }
      if (!angkaMainRaw) {
        alert("Masukkan angka main terlebih dahulu.");
        return;
      }

      // Split kombinasi 3D, filter yang length=3 dan valid angka
      let kombinasi3D = rawData.split(/[\s,*]+/).filter(k => k.length === 3 && /^\d{3}$/.test(k));

      if (kombinasi3D.length === 0) {
        resultDiv.textContent = "Data kombinasi tidak valid atau tidak ada kombinasi 3 digit.";
        return;
      }

      // Ambil angka main per baris, validasi angka max 6 digit
      const angkaMainLines = angkaMainRaw.split('\n').map(l => l.trim()).filter(l => l.length > 0);
      for (const line of angkaMainLines) {
        if (!line.match(/^\d{1,6}$/)) {
          alert("Setiap baris angka main harus berupa digit (maks 6 digit). Contoh:\n123\n45");
          return;
        }
      }

      // Ambil ekor angka main (digit terakhir tiap baris)
      const ekorMain = angkaMainLines.map(line => line.slice(-1));

      // Filter kombinasi 3D yang ekor-nya ada di angka main (digit terakhir)
      let hasilFilter = kombinasi3D.filter(k => ekorMain.includes(k.slice(-1)));

      // Filter shio jika bukan 'all'
      if (shioMain !== "all") {
        const shioList = shioMap[shioMain];
        if (!shioList) {
          alert("Shio tidak ditemukan dalam daftar.");
          return;
        }
        // Filter kombinasi yang 2 digit terakhir (ekor) ada di daftar shio
        hasilFilter = hasilFilter.filter(k => {
          const duaDigitAkhir = k.slice(-2);
          return shioList.includes(duaDigitAkhir);
        });
      }

      if (hasilFilter.length === 0) {
        resultDiv.textContent = "Tidak ditemukan kombinasi yang cocok dengan angka main dan filter shio.";
        return;
      }

      resultDiv.textContent = `✅ Hasil filter (${hasilFilter.length} kombinasi):\n` + hasilFilter.join('\n');
    }
  </script>
</body>
</html>
